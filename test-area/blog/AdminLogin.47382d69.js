!function(){function e(e){return e&&e.__esModule?e.default:e}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire35b1;t.register("63IY9",(function(n,a){var r,o,u,l,i;r=n.exports,Object.defineProperty(r,"__esModule",{value:!0,configurable:!0}),o=n.exports,u="default",l=function(){return h},i=function(e){return h=e},Object.defineProperty(o,u,{get:l,set:i,enumerable:!0,configurable:!0});var c=t("8CHzG"),s=t("75JRK"),d=t("4Fae7"),f=t("bW9HB"),p=t("diPDO"),m=t("cYcEi"),g=t("5OXzf"),v=t("dR8pc"),b=t("05gWr"),w=void 0,h=function(){var t,n=(0,p.useContext)(g.NewContext),a=n.$,r=n.Fetch,o=n.setReducer,u=(0,m.useNavigate)(),l=(0,d.default)((0,p.useState)({acName:"",pwdTemp:"",pwd:""}),2),i=l[0],h=i.acName,y=i.pwdTemp,N=i.pwd,E=l[1],k=(0,p.useRef)(h),C=(0,p.useRef)(N),I=(t=(0,c.default)((function(e,t){var n,r,o;return(0,f.__generator)(this,(function(u){switch(u.label){case 0:return n=t.target,r={},"pwdTemp"!==e?[3,2]:(r[e]=n.value,[4,a.useSHA("SHA-256",n.value)]);case 1:return o=u.sent(),r.pwd=o,[3,3];case 2:r[e]=n.value,u.label=3;case 3:return E((function(e){return(0,s.default)({},e,r)})),[2]}}))})),function(e,n){return t.apply(this,arguments)}),S=function(){r.post("/login",{data:{acName:k.current,pwd:C.current}}).then((function(e){var t=e.data;o(b.actionCreator,"setAuthInfo",{ac:null==t?void 0:t.ac,token:null==t?void 0:t.token}),sessionStorage.setItem("temp",JSON.stringify({ac:null==t?void 0:t.ac,token:null==t?void 0:t.token})),u({pathname:"/admin/article_all"})})).catch((function(e){return alert("error")}))},_=function(e){return 13===e.keyCode&&S()};return(0,p.useEffect)((function(){k.current=h,C.current=N}),[h,N]),(0,p.useEffect)((function(){if(sessionStorage.getItem("temp")){var e=JSON.parse(sessionStorage.getItem("temp"));o(b.actionCreator,"setAuthInfo",e)}return a(window).listener("keypress",_),function(){return a(window).removeListener("keypress",_)}}),[]),e(p).createElement(b.Container,null,e(p).createElement("div",{className:"login-layout"},e(p).createElement("div",{className:"header"},"登入系統"),e(p).createElement("div",{className:"input-group"},e(p).createElement(v.CustomInput,{label:"帳號",type:"text",bindVal:h,changeEvent:I.bind(w,"acName"),className:h?"lock":""}),e(p).createElement(v.CustomInput,{label:"密碼",type:"password",bindVal:y,changeEvent:I.bind(w,"pwdTemp"),className:y?"lock":""})),e(p).createElement("div",{onClick:S,className:"login-btn"},"登入")))}}))}();